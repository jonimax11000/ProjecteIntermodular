@startuml ArquitecturaEconomica
skinparam componentStyle rectangle
skinparam nodesep 10
skinparam ranksep 20

title "Arquitectura Mínima - Entorno Desarrollo/Pruebas"

package "VPS Único (24GB RAM, 4 CPU)" {
  component [Nginx Reverse Proxy] as nginx
  component [Docker Engine] as docker
  
  package "Contenedores Docker" {
    component [Spring Boot\nJava + Hibernate] as spring
    component [Express TypeScript\nVideo HLS Server] as express
    component [Odoo ERP] as odoo
    
    component [MySQL] as mysql
    component [MongoDB] as mongo
    component [PostgreSQL\n(Odoo DB)] as pgsql
    
    package "Volúmenes Docker" as volumes {
      component [Videos HLS] as videos
      component [Thumbnails] as Thumbnails
    }
  }
  
  package "Aplicaciones Web Estáticas" as webapps {
    component [Quasar Web App] as quasar
    component [Mobile API Gateway] as mobileapi
  }
}

spring --> mysql : JDBC
spring --> mongo : Mongo Driver
odoo --> pgsql : SQL
express --> videos : Lee/Serve
nginx --> spring : /api
nginx --> express : /video
nginx --> odoo : /odoo
nginx --> quasar : /*
nginx --> mobileapi : /mobile

component [Usuario Web] as userweb
component [App Móvil] as mobileapp
component [Administrador] as admin

userweb --> nginx : HTTPS
mobileapp --> nginx : HTTPS/API
admin --> nginx : HTTPS/Odoo

note right of nginx
  Configuración:
  - Virtual hosts
  - SSL auto (Let's Encrypt)
  - Load balancing local
  - Cache estático
end note

note left of docker
  Docker Compose:
  - 8 servicios
  - Network bridge
  - Volumes bind
  - Resource limits
end note

@enduml